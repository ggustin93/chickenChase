/* 
 * dark-mode-prevention.css
 * Ce fichier contient des styles pour désactiver le mode sombre et optimiser les performances
 * sur les appareils iOS, en particulier pour les PWA.
 */

/* Forcer le mode clair même si le système est en mode sombre */
:root {
  color-scheme: light only;
}

/* Désactiver les transitions sur iOS pour améliorer les performances */
@supports (-webkit-touch-callout: none) {
  /* Détection iOS */
  body {
    /* Désactiver les transitions par défaut */
    --ion-transition-duration: 0ms;
  }
  
  /* Optimisations pour les PWA sur iOS */
  @media (display-mode: standalone), (display-mode: fullscreen) {
    /* Réduire les animations dans les PWA */
    ion-modal,
    ion-popover,
    ion-action-sheet,
    ion-toast,
    ion-alert,
    ion-loading,
    ion-menu {
      --backdrop-opacity: 0.5;
      --box-shadow: none;
      --transition-duration: 150ms;
    }
    
    /* Optimiser le menu latéral */
    ion-menu::part(backdrop) {
      opacity: var(--backdrop-opacity);
      transition: opacity var(--transition-duration) ease-out;
    }
    
    ion-menu::part(container) {
      box-shadow: var(--box-shadow);
      transition: transform var(--transition-duration) ease-out;
    }
    
    /* Désactiver les animations complexes */
    .ion-page-invisible {
      opacity: 0;
      transition: opacity 100ms ease-out;
    }
    
    /* Optimiser les listes */
    ion-list {
      contain: content;
    }
    
    /* Utiliser des transitions plus légères */
    ion-item {
      transition: none;
    }
    
    /* Optimiser les animations de chargement */
    ion-spinner {
      animation-duration: 1000ms;
    }
    
    /* Désactiver les effets de ripple coûteux */
    ion-ripple-effect {
      display: none;
    }
  }
}

/* Optimisations pour les appareils à faible puissance */
@media (prefers-reduced-motion) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  ion-ripple-effect {
    display: none;
  }
}

/* Optimisations spécifiques pour les menus */
ion-menu {
  /* Accélération matérielle */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  
  /* Réduire les calculs de style */
  contain: strict;
  
  /* Améliorer le rendu des textes */
  -webkit-font-smoothing: antialiased;
}

/* Désactiver les transitions de page coûteuses sur iOS */
@supports (-webkit-touch-callout: none) {
  .ion-page-invisible {
    opacity: 0;
    z-index: -1;
  }
  
  ion-router-outlet > .ion-page {
    transform: translateZ(0);
  }
  
  ion-nav > .ion-page {
    transform: translateZ(0);
  }
}